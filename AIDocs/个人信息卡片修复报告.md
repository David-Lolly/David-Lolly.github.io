# ä¸ªäººä¿¡æ¯å¡ç‰‡æ˜¾ç¤ºé—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ” é—®é¢˜åˆ†æ

### ç—‡çŠ¶
é¦–é¡µä¸ªäººä¿¡æ¯å¡ç‰‡ä¸æ˜¾ç¤ºï¼Œé¡µé¢ç©ºç™½æˆ–æ˜¾ç¤ºé»˜è®¤å†…å®¹ã€‚

### æ ¹æœ¬åŸå› 
1. **Velite æ„å»ºé”™è¯¯**ï¼š`profile.mdx` ä¸­åŒ…å«ç©ºå€¼å­—æ®µï¼ˆ`twitter: ` å’Œ `linkedin: `ï¼‰
2. **Schema éªŒè¯å¤±è´¥**ï¼šVelite æœŸæœ› `s.string().optional()` ä½†æ”¶åˆ° `null` å€¼
3. **æ„å»ºä¸­æ–­**ï¼šç”±äºéªŒè¯é”™è¯¯ï¼Œ`profile` æ•°æ®æ²¡æœ‰è¢«å†™å…¥ `.velite/basic.json`

### é”™è¯¯ä¿¡æ¯
```
[VELITE] issues:
content/basic/profile.mdx
 error Expected string, received null  linkedin
 error Expected string, received null  twitter
```

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. æ¸…ç†é…ç½®æ–‡ä»¶ä¸­çš„ç©ºå­—æ®µ

**ä¿®æ”¹å‰** (`profile.mdx`):
```yaml
twitter: 
linkedin: 
```

**ä¿®æ”¹å**:
```yaml
# å®Œå…¨åˆ é™¤ç©ºå­—æ®µï¼Œæˆ–è€…æä¾›æœ‰æ•ˆå€¼
# twitter å’Œ linkedin å­—æ®µè¢«ç§»é™¤
```

### 2. å¢å¼º Schema å¤„ç†èƒ½åŠ›

åœ¨ `velite.config.ts` ä¸­æ·»åŠ  `transform` å‡½æ•°ï¼Œè‡ªåŠ¨æ¸…ç† `null` å’Œç©ºå­—ç¬¦ä¸²ï¼š

```typescript
const basic = defineCollection({
  name: 'Basic',
  pattern: 'basic/**/*.mdx',
  schema: s
    .object({
      // ... å­—æ®µå®šä¹‰
    })
    .transform((data) => {
      // æ¸…ç†ç©ºå­—ç¬¦ä¸²å’Œ null å€¼
      const cleaned: any = { ...data }
      Object.keys(cleaned).forEach(key => {
        if (cleaned[key] === null || cleaned[key] === '') {
          delete cleaned[key]
        }
      })
      return cleaned
    })
})
```

## ğŸ“Š ä¿®å¤ç»“æœ

### ä¿®å¤å‰
```json
// .velite/basic.json
[
  {
    "type": "about",
    // ... only about data, no profile
  }
]
```

### ä¿®å¤å
```json
// .velite/basic.json
[
  {
    "type": "about",
    // ... about data
  },
  {
    "type": "profile",
    "name": "ç†Šä¹ä¹",
    "avatar": "/static/images/basic_info/avatar.jpg",
    "position": "å¼€å‘å·¥ç¨‹ç‹®",
    "bio": "ä¸€åªå¼€å‘å·¥ç¨‹ç‹®ğŸ¦...",
    "email": "3419552864@qq.com",
    "github": "https://github.com/...",
    "website": "https://www.mcaoyuan.com",
    "tech_stack": ["Python", "FastAPI", ...]
  }
]
```

## ğŸ¯ æœ€ä½³å®è·µ

### é…ç½®æ–‡ä»¶ç¼–å†™è§„èŒƒ

**âœ… æ­£ç¡®åšæ³•**ï¼š
```yaml
---
type: profile
name: å¼ ä¸‰
email: zhangsan@example.com
github: https://github.com/zhangsan
# ä¸éœ€è¦çš„å­—æ®µç›´æ¥ä¸å†™
---
```

**âŒ é”™è¯¯åšæ³•**ï¼š
```yaml
---
type: profile
name: å¼ ä¸‰
email: zhangsan@example.com
github: https://github.com/zhangsan
twitter:        # âŒ ç©ºå€¼ä¼šå¯¼è‡´æ„å»ºé”™è¯¯
linkedin:       # âŒ ç©ºå€¼ä¼šå¯¼è‡´æ„å»ºé”™è¯¯
---
```

### å¦‚ä½•æ·»åŠ ç¤¾äº¤é“¾æ¥

å¦‚æœåç»­éœ€è¦æ·»åŠ  Twitter æˆ– LinkedInï¼š

```yaml
---
type: profile
name: å¼ ä¸‰
twitter: https://twitter.com/zhangsan
linkedin: https://linkedin.com/in/zhangsan
---
```

## ğŸ”§ æ•…éšœæ’æŸ¥æ­¥éª¤

å¦‚æœé‡åˆ°ç±»ä¼¼é—®é¢˜ï¼š

1. **æ£€æŸ¥ Velite æ„å»ºæ—¥å¿—**
   ```bash
   npx velite build
   ```

2. **æŸ¥çœ‹é”™è¯¯ä¿¡æ¯**
   - æ‰¾åˆ°æŠ¥é”™çš„å­—æ®µå
   - æ£€æŸ¥å¯¹åº”çš„ `.mdx` æ–‡ä»¶

3. **ä¿®å¤é…ç½®æ–‡ä»¶**
   - åˆ é™¤ç©ºå­—æ®µ
   - æˆ–æä¾›æœ‰æ•ˆå€¼

4. **é‡æ–°æ„å»º**
   ```bash
   npx velite build
   ```

5. **éªŒè¯ç”Ÿæˆçš„æ•°æ®**
   - æ£€æŸ¥ `.velite/basic.json`
   - ç¡®è®¤ profile æ•°æ®å­˜åœ¨

## ğŸ“ ç›¸å…³æ–‡ä»¶

- é…ç½®æ–‡ä»¶ï¼š`content/basic/profile.mdx`
- Schema å®šä¹‰ï¼š`velite.config.ts`
- ç”Ÿæˆæ•°æ®ï¼š`.velite/basic.json`
- ç»„ä»¶ï¼š`components/profile-card.tsx`

## ğŸ’¡ æŠ€æœ¯ç»†èŠ‚

### YAML ç©ºå€¼å¤„ç†

YAML è§„èŒƒä¸­ï¼š
- `field:` (å†’å·åæ— å†…å®¹) â†’ è§£æä¸º `null`
- `field: ""` â†’ è§£æä¸ºç©ºå­—ç¬¦ä¸² `""`
- ä¸å†™å­—æ®µ â†’ å­—æ®µä¸å­˜åœ¨ `undefined`

### Velite Schema éªŒè¯

- `s.string().optional()` æ¥å—ï¼š`string | undefined`
- ä¸æ¥å—ï¼š`null`
- è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ `transform` å°† `null` è½¬æ¢ä¸º `undefined`

## âœ¨ ä¼˜åŒ–å»ºè®®

1. **åœ¨é…ç½®æ–‡ä»¶ä¸­åªä¿ç•™éœ€è¦çš„å­—æ®µ**
2. **ä½¿ç”¨ transform å‡½æ•°å¢å¼ºå®¹é”™æ€§**
3. **å®šæœŸè¿è¡Œ `npx velite build` æ£€æŸ¥é…ç½®**
4. **æŸ¥çœ‹ `.velite/*.json` éªŒè¯ç”Ÿæˆçš„æ•°æ®**

---

ä¿®å¤å®Œæˆæ—¶é—´ï¼š2025å¹´11æœˆ10æ—¥
